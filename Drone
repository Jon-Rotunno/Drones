from djitellopy import Tello
import cv2
from time import sleep

# Initialize the drone and connect
me = Tello()
me.connect()

# Print battery level
print(f"Battery: {me.get_battery()}%")

# Start video stream
me.streamon()
frame_read = me.get_frame_read()

# Take off
me.takeoff()
sleep(2)

# Move forward 100 cm
me.move_forward(100)
sleep(2)

# Show camera feed for a few seconds
for _ in range(100):  # About 3â€“4 seconds at 30 FPS
    frame = frame_read.frame
    img = cv2.resize(frame, (640, 480))
    cv2.imshow("Tello Camera", img)
    
    if cv2.waitKey(1) & 0xFF == ord('q'):
        break
    sleep(0.03)  # ~30 FPS

# Land
me.land()
sleep(2)

# Clean up
me.streamoff()
cv2.destroyAllWindows()
me.end()

from djitellopy import Tello
import cv2
from time import sleep

# Initialize drone
drone = Tello()
drone.connect()

keepRecording = True  # Capital 'T'
# Start video stream
drone.streamon()

# Get video frames
frame_read = drone.get_frame_read()

# Show camera feed live
try:
    while True:
        frame = frame_read.frame
        cv2.imshow("Tello Camera", frame)

        if cv2.waitKey(1) & 0xFF == ord('q'):
            break

except KeyboardInterrupt:
    pass

# Clean up the video window and stop streaming
drone.streamoff()
cv2.destroyAllWindows()

# Flight actions
sleep(1)
drone.takeoff()
sleep(1)
drone.move_up(155)
sleep(2)
drone.move_forward(352)  # Use integer instead of 352.5
sleep(2)
drone.land()
sleep(2)
drone.end()
